io.Writer

Интерфейс io.Writer предназначен для записи в поток. Он определяет метод Write():


type Writer interface { 
    Write(p []byte) (n int, err error) 
}
Метод Write предназначен для копирования данных их среза байт p в определенный ресурс - файл, сетевой интерфейс и т.д. Метод возвращает количество записанных байтов и объект ошибки.

Рассмотрим примитивный пример:


package main
import "fmt"
 
type phoneWriter struct{ }
 
func (p phoneWriter) Write(bs []byte) (int, error){
    if len(bs) == 0 { 
         return 0, nil 
   }
   for i := 0; i < len(bs); i++{
        if(bs[i] >= '0' && bs[i] <= '9'){
            fmt.Print(string(bs[i]))
        }
    }
    fmt.Println()
    return len(bs), nil
}
 
func main() { 
    bytes1 := []byte("+1(234)567 9010")
    bytes2 := []byte("+2-345-678-12-35")
     
    writer := phoneWriter{}
    writer.Write(bytes1)
    writer.Write(bytes2)
}
Здесь структура phoneWriter реализует интерфейс Writer. В методе Write она принимает срез байтов. Предполагается, что срез байтов хранит номер телефона. Эта информация должным образом обрабатывается: из нее выделяются цифры, которые выводятся на консоль. То есть тип phoneWriter осуществляет запись потока байт на консоль.

В качестве результата метод возвращает длину среза и значение nil.

Для имитации потока байт определяются два среза байт на основе строк, которые передаются в метод Write.

На основе выше рассмотренных интерфейсов Writer и Reader основана вся система ввода-вывода в Go, и впоследствии мы более детально рассмотрим их примение при работе с файлами и сетевыми потоками.
